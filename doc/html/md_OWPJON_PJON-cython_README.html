<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>sketchbook: PJON-cython</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">sketchbook
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">PJON-cython </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Call the PJON C++ library directly from Python 2 or Python 3 (via <a href="http://cython.org/">Cython</a>)</p>
<p>PJON (Github: <a href="https://github.com/gioblu/PJON/">PJON</a> ) is an open-source, multi-master, multi-media (one-wire, two-wires, radio) communication protocol available for various platforms (Arduino/AVR, ESP8266, Teensy).</p>
<p>PJON is one of very few open-source implementations of multi-master communication protocols for microcontrollers.</p>
<h2>PJON-cython vs PJON-python</h2>
<p><b>PJON-cython</b> allows you to use the C++ PJON library from Python via Cython (C++ wrappers for Python) while <b>PJON-python</b> is a re-implementation of the PJON protocol in Python</p>
<h2>Current status:</h2>
<p>Support for PJON 11.1 <em>only</em> and the following strategies :-</p>
<ul>
<li>LocalUDP</li>
<li>GlobalUDP</li>
<li>ThroughSerial</li>
<li>ThroughSerialAsync <em>new</em></li>
</ul>
<p>Note</p>
<ul>
<li>PJON-cython versions are aligned with PJON versions to indicate compatibility with C implementation for uC platforms.</li>
</ul>
<h4>Python support</h4>
<p>Python 2.7, 3.4, 3.5 and 3.6 are tested and considered supported</p>
<h4>Platform support</h4>
<p>Linux and Mac OS X are considered supported. Windows is not supported (sorry!).</p>
<h2>Install from pip</h2>
<p>Current version is 11.1.5-1</p>
<p>```bash pip install pjon-cython ```</p>
<h2>Testing</h2>
<p>```bash $(which python) <a class="el" href="setup_8py.html">setup.py</a> nosetests &ndash;with-doctest &ndash;doctest-extension=md ```</p>
<h2>GlobalUDP example</h2>
<p>```python </p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p>import <a class="el" href="namespacepjon__cython.html">pjon_cython</a> as PJON class GlobalUDP(PJON.GlobalUDP):</p>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p>... # you can overload <b>init</b> if you want ... def <b>init</b>(self, device_id): ... PJON.GlobalUDP.__init__(self, device_id) ... self.packets_received = 0 ... def receive(self, data, length, packet_info): ... print ("Recv ({}): {}".format(length, data)) ... print (packet_info) ... self.packets_received += 1 ... self.reply(b'P')</p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p>g = GlobalUDP(44) idx = g.send(123, b'HELO') </p>
<h1>calling loop calls the PJON bus.update() and bus.receive()</h1>
<h1>and the return is the results of those functions -</h1>
<p>packets_to_send, receive_status = g.loop() </p>
<h1>packets_to_send is the Number of packets in the PJON buffer</h1>
<p>packets_to_send</p>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p>1 </p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p>#PJON constants are available too receive_status == PJON.PJON_FAIL</p>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p>True </p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<h1>When you're done with your PJON interface, you can cleanup the connection by deleting it</h1>
<p>del g</p>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p>```</p>
<h2>Through Serial example</h2>
<p>```python </p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p>import <a class="el" href="namespacepjon__cython.html">pjon_cython</a> as PJON #ThroughSerial Example </p>
<h1>Make sure you set self.bus.set_synchronous_acknowledge(false) on the other side</h1>
<p></p>
<p>class ThroughSerial(PJON.ThroughSerial):</p>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p>... ... def receive(self, data, length, packet_info): ... if data.startswith(b'H'): ... print ("Recv ({}): {} - REPLYING".format(length, data)) ... self.reply(b'BONZA') ... else: ... print ("Recv ({}): {}".format(length, data)) ... print ('') ... </p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<h1>Put your actual serial device in here...</h1>
<p>ts = ThroughSerial(44, b"/dev/null", 115200) </p>
<h1>Send returns the packet's index in the packet buffer</h1>
<p>ts.send(100, b'PING 1')</p>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p>0 </p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p>ts.send(100, b'PING 2')</p>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p>1 </p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<h1>Error handling happens through exceptions such as PJON.PJON_Connection_Lost</h1>
<p>while True:</p>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p>... packets_to_send, receive_status = ts.loop() Traceback (most recent call last): ... PJON_Connection_Lost</p>
<p>```</p>
<h2>Setting configurable properties</h2>
<p>```python </p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p>import <a class="el" href="namespacepjon__cython.html">pjon_cython</a> as PJON class GlobalUDP(PJON.GlobalUDP):</p>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p>... def receive(self, data, length, packet_info): ... print ("Recv ({}): {}".format(length, data))</p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<h1>GlobalUDP and LocalUDP both support set_port to configure their UDP listening port</h1>
<p>g = GlobalUDP(99, 8821) del g #They return the class object, so you can "chain them" pjon = GlobalUDP(100,8821).set_autoregistration(False) pjon # doctest: +ELLIPSIS</p>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p>&lt;<b>main</b>.GlobalUDP object at 0x...&gt; </p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p></p>
<h1>These options affect packet overhead (in bytes)</h1>
<p>pjon.packet_overhead()</p>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p>6 </p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p>pjon.set_crc_32(True).packet_overhead()</p>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p>9 </p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p>pjon.set_packet_id(True).packet_overhead()</p>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p>11 </p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p>pjon.set_synchronous_acknowledge(True).packet_overhead()</p>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p>11 </p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p>pjon.set_packet_id(False).set_asynchronous_acknowledge(False).packet_overhead()</p>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p>9 </p>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p>pjon.set_crc_32(False).include_sender_info(False).packet_overhead()</p>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p></p>
</blockquote>
<p>5</p>
<p>``` </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jun 24 2019 21:30:39 for sketchbook by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
